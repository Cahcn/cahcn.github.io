<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="light"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cahcn.github.io/img/img/logo.jpg"><link rel="icon" href="https://cahcn.github.io/img/img/logo.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Cahcn"><meta name="keywords" content=""><meta name="description" content="Cahcn的自留地"><meta name="referrer" content="no-referrer-when-downgrade"><title>IPTV - Cahcn的自留地</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"cahcn.github.io",root:"/",version:"1.9.8",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!1,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!1,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:"https://umami.cahcn.me/script.js",website_id:"20df567c-dace-423d-ba5a-6948a9ebb0d1",domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null},woyaola:21827207,woyaola_v6:454994},search_path:"/search.xml",include_content_in_search:!1};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>if (!Fluid.ctx.dnt) {
        let umami = document.createElement('script');
        umami.async = true;
        umami.src = "https://umami.cahcn.me/script.js";
        umami.setAttribute("data-website-id", "20df567c-dace-423d-ba5a-6948a9ebb0d1");
        umami.setAttribute("data-domains", "");
        document.head.appendChild(umami);
      }</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("//js.users.51.la/21827207.js")</script><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>LA.init({id:"KW4hotWJagTauvWm",ck:"KW4hotWJagTauvWm"})</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Cahcn的自留地" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:50vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Cahcn的自留地</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-link-fill"></i> <span>链接</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="https://weibo.com/gsr081206" target="_blank"><span>微博</span> </a><a class="dropdown-item" href="/posts/2024-10-20-wechat.html" target="_self"><span>微信公众号</span> </a><a class="dropdown-item" href="https://www.youtube.com/@lizhang5389" target="_blank"><span>YouTube</span> </a><a class="dropdown-item" href="https://blog.sina.com.cn/u/2061519855" target="_blank"><span>鉴河之声</span> </a><a class="dropdown-item" href="https://n233.netlify.app/" target="_blank"><span>测试站点</span> </a><a class="dropdown-item" href="/comments" target="_self"><span>评论备份</span> </a><a class="dropdown-item" href="https://stats.uptimerobot.com/UQMFDeMbQN" target="_blank"><span>站点状态</span> </a><a class="dropdown-item" href="/ver" target="_self"><span>更新日志</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-link-fill"></i> <span>CNR & CRI DRM</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/drm" target="_self"><span>频率表</span> </a><a class="dropdown-item" href="/drm/news.html" target="_self"><span>频率异动</span> </a><a class="dropdown-item" href="/drm/test.html" target="_self"><span>收听记录</span></a></div></li><li class="nav-item"><a class="nav-link" href="/iptv" target="_self"><i class="iconfont icon-link-fill"></i> <span>IPTV</span></a></li><li class="nav-item"><a class="nav-link" href="/about" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/atom.xml" target="_self"><i class="iconfont icon-rss-fill"></i> <span>RSS</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://gcore.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">IPTV</span></div></div></div></div></div></div></header><main><div class="container nopadding-x-md"><div id="board"><div class="container"><div class="row"><div class="col-12 col-md-10 m-auto"><article class="page-content"><div class="markdown-body"><p>2025年3月27日，首次整理。<br>2025年5月6日，抓包发现，广西电信光纤电视悄悄调整了所有频道的Channel ID和直播源格式，原代码部分失效，已修改。</p><p>目录：<br>适用于广西电信光纤电视<br><a href="/iptv/#1-%E6%8F%90%E5%8F%96%E6%8A%93%E5%8C%85%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E7%9B%B4%E6%92%AD%E6%BA%90%EF%BC%88%E6%8C%89%E7%85%A7%E5%8D%8F%E8%AE%AE%E6%8E%92%E5%BA%8F%EF%BC%89">1-提取抓包数据中的直播源（按照协议排序）</a><br><a href="/iptv/#2-%E6%8F%90%E5%8F%96%E6%8A%93%E5%8C%85%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E7%9B%B4%E6%92%AD%E6%BA%90%EF%BC%88%E5%B0%86%E7%BB%84%E6%92%AD%E3%80%81%E5%8D%95%E6%92%AD%E6%BA%90%E6%8C%89%E7%85%A7ID%E6%8E%92%E5%BA%8F%EF%BC%89">2-提取抓包数据中的直播源（将组播、单播源按照ID排序）</a></p><p>适用于广西联通沃家电视<br><a href="/iptv/#3-%E6%8F%90%E5%8F%96%E6%8A%93%E5%8C%85%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E7%9B%B4%E6%92%AD%E6%BA%90">3-提取抓包数据中的直播源</a><br><a href="/iptv/#4-%E6%8F%90%E5%8F%96%E6%8A%93%E5%8C%85%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E7%9B%B4%E6%92%AD%E6%BA%90%EF%BC%88%E5%B0%86%E5%8D%95%E6%92%AD%E6%BA%90%E6%8C%89%E7%85%A7ID%E6%8E%92%E5%BA%8F%EF%BC%89">4-提取抓包数据中的直播源（将单播源按照ID排序）</a></p><p>已失效的代码（适用于广西电信光纤电视2025年4月底之前的抓包数据）<br><a href="/iptv/#5-%E6%8F%90%E5%8F%96%E6%8A%93%E5%8C%85%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E7%9B%B4%E6%92%AD%E6%BA%90%EF%BC%88%E6%8C%89%E7%85%A7%E5%8D%8F%E8%AE%AE%E6%8E%92%E5%BA%8F%EF%BC%89">5-提取抓包数据中的直播源（按照协议排序）</a><br><a href="/iptv/#6-%E6%8F%90%E5%8F%96%E6%8A%93%E5%8C%85%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E7%9B%B4%E6%92%AD%E6%BA%90%EF%BC%88%E5%B0%86%E7%BB%84%E6%92%AD%E3%80%81%E5%8D%95%E6%92%AD%E6%BA%90%E6%8C%89%E7%85%A7ID%E6%8E%92%E5%BA%8F%EF%BC%89">6-提取抓包数据中的直播源（将组播、单播源按照ID排序）</a></p><hr><p>仅适用于广西电信光纤电视抓包数据，有组播、单播两种格式的直播源。</p><h4 id="1-提取抓包数据中的直播源（按照协议排序）"><a href="#1-提取抓包数据中的直播源（按照协议排序）" class="headerlink" title="1-提取抓包数据中的直播源（按照协议排序）"></a>1-提取抓包数据中的直播源（按照协议排序）</h4><p>仅做整理，不改变原始数据的频道顺序。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-comment"># 从 IPTV 数据文件中提取频道名、组播和单播地址并分类写入输出文件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_and_classify_channels</span>(<span class="hljs-params">input_file, output_file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(input_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><br>    <span class="hljs-comment"># 匹配所有频道数据</span><br>    pattern = re.findall(<br>        <span class="hljs-string">r&#x27;ChannelID=&quot;(.*?)&quot;.*?ChannelName=&quot;(.*?)&quot;.*?ChannelURL=&quot;(.*?)&quot;.*?ChannelSDP=&quot;(.*?)&quot;&#x27;</span>,<br>        content,<br>        re.DOTALL<br>    )<br><br>    <span class="hljs-comment"># 处理组播和单播链接</span><br>    rtp_links = []<br>    rtsp_links = []<br><br>    <span class="hljs-comment"># 去除重复的链接</span><br>    seen_rtp = <span class="hljs-built_in">set</span>()<br>    seen_rtsp = <span class="hljs-built_in">set</span>()<br><br>    <span class="hljs-keyword">for</span> channel_id, channel_name, channel_url, channel_sdp <span class="hljs-keyword">in</span> pattern:<br>        <span class="hljs-comment"># 分割 URL 字符串，提取多个地址</span><br>        urls = channel_url.split(<span class="hljs-string">&quot;|&quot;</span>) + channel_sdp.split(<span class="hljs-string">&quot;|&quot;</span>)<br>        <br>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:<br>            <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">&quot;igmp://&quot;</span>):<br>                ip = url.replace(<span class="hljs-string">&quot;igmp://&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)<br>                line = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;channel_name&#125;</span>,rtp://<span class="hljs-subst">&#123;ip&#125;</span>&quot;</span><br>                <span class="hljs-keyword">if</span> line <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> seen_rtp:<br>                    rtp_links.append(line)<br>                    seen_rtp.add(line)<br><br>            <span class="hljs-keyword">elif</span> url.startswith(<span class="hljs-string">&quot;rtsp://&quot;</span>):<br>                clean_url = re.sub(<span class="hljs-string">r&#x27;(\.smil)\?.*&#x27;</span>, <span class="hljs-string">r&#x27;\1&#x27;</span>, url)<br>                line = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;channel_name&#125;</span>,<span class="hljs-subst">&#123;clean_url&#125;</span>&quot;</span><br>                <span class="hljs-keyword">if</span> line <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> seen_rtsp:<br>                    rtsp_links.append(line)<br>                    seen_rtsp.add(line)<br><br>    <span class="hljs-comment"># 合并结果，按格式输出，先写 rtp 部分，再写 rtsp 部分</span><br>    output_lines = [<span class="hljs-string">&quot;# 组播源&quot;</span>] + rtp_links + [<span class="hljs-string">&quot;\n# 单播源&quot;</span>] + rtsp_links<br><br>    <span class="hljs-comment"># 写入到输出文件</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(<span class="hljs-string">&quot;\n&quot;</span>.join(output_lines))<br><br><span class="hljs-comment"># 指定输入和输出文件路径</span><br>input_file = <span class="hljs-string">&quot;input.txt&quot;</span>   <span class="hljs-comment"># 原始数据为 input.txt</span><br>output_file = <span class="hljs-string">&quot;output.txt&quot;</span> <span class="hljs-comment"># 处理后的数据存放在 output.txt</span><br><br><span class="hljs-comment"># 运行程序</span><br>extract_and_classify_channels(input_file, output_file)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;转换完成！结果已保存至 <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="2-提取抓包数据中的直播源（将组播、单播源按照ID排序）"><a href="#2-提取抓包数据中的直播源（将组播、单播源按照ID排序）" class="headerlink" title="2-提取抓包数据中的直播源（将组播、单播源按照ID排序）"></a>2-提取抓包数据中的直播源（将组播、单播源按照ID排序）</h4><p>按照ID排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-comment"># 从 IPTV 数据文件中提取频道名、组播和单播地址并分类写入输出文件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_and_classify_channels</span>(<span class="hljs-params">input_file, output_file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(input_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><br>    <span class="hljs-comment"># 匹配所有频道数据</span><br>    pattern = re.findall(<br>        <span class="hljs-string">r&#x27;ChannelID=&quot;(.*?)&quot;.*?ChannelName=&quot;(.*?)&quot;.*?ChannelURL=&quot;(.*?)&quot;.*?ChannelSDP=&quot;(.*?)&quot;&#x27;</span>,<br>        content,<br>        re.DOTALL<br>    )<br><br>    channels = []<br>    seen_rtp = <span class="hljs-built_in">set</span>()<br>    seen_rtsp = <span class="hljs-built_in">set</span>()<br><br>    <span class="hljs-keyword">for</span> channel_id, channel_name, channel_url, channel_sdp <span class="hljs-keyword">in</span> pattern:<br>        <span class="hljs-comment"># 分割 URL 字符串，提取多个地址</span><br>        urls = channel_url.split(<span class="hljs-string">&quot;|&quot;</span>) + channel_sdp.split(<span class="hljs-string">&quot;|&quot;</span>)<br><br>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:<br>            <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">&quot;igmp://&quot;</span>):<br>                <span class="hljs-comment"># 提取组播 IP 和端口</span><br>                <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r&#x27;igmp://(\d+\.\d+\.\d+\.(\d+)):(\d+)&#x27;</span>, url)<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:<br>                    ip_full, ip_last, port = <span class="hljs-keyword">match</span>.groups()<br>                    rtp_url = <span class="hljs-string">f&quot;rtp://<span class="hljs-subst">&#123;ip_full&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span>&quot;</span><br>                    <span class="hljs-keyword">if</span> rtp_url <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> seen_rtp:<br>                        rtp_id = <span class="hljs-built_in">int</span>(ip_last)<br>                        rtp_name = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;rtp_id&#125;</span>-<span class="hljs-subst">&#123;channel_name&#125;</span>&quot;</span><br>                        channels.append((rtp_id, rtp_name, rtp_url, <span class="hljs-string">&quot;RTP&quot;</span>))<br>                        seen_rtp.add(rtp_url)<br><br>            <span class="hljs-keyword">elif</span> url.startswith(<span class="hljs-string">&quot;rtsp://&quot;</span>):<br>                <span class="hljs-comment"># 提取 rtsp ID（224/ 后的最后 4 位数字）</span><br>                clean_url = re.sub(<span class="hljs-string">r&#x27;(\.smil)\?.*&#x27;</span>, <span class="hljs-string">r&#x27;\1&#x27;</span>, url)<br>                <span class="hljs-keyword">if</span> clean_url <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> seen_rtsp:<br>                    <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r&#x27;224/(\d+)&#x27;</span>, clean_url)<br>                    rtsp_id = <span class="hljs-built_in">int</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)[-<span class="hljs-number">4</span>:]) <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>                    rtsp_name = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;rtsp_id&#125;</span>-<span class="hljs-subst">&#123;channel_name&#125;</span>&quot;</span><br>                    channels.append((rtsp_id, rtsp_name, clean_url, <span class="hljs-string">&quot;RTSP&quot;</span>))<br>                    seen_rtsp.add(clean_url)<br><br>    <span class="hljs-comment"># 按 ID 排序</span><br>    channels.sort()<br><br>    <span class="hljs-comment"># 输出结果，按类型分类</span><br>    rtp_links = [<span class="hljs-string">&quot;# 组播源&quot;</span>] + [<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> _, name, url, typ <span class="hljs-keyword">in</span> channels <span class="hljs-keyword">if</span> typ == <span class="hljs-string">&quot;RTP&quot;</span>]<br>    rtsp_links = [<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;# 单播源&quot;</span>] + [<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> _, name, url, typ <span class="hljs-keyword">in</span> channels <span class="hljs-keyword">if</span> typ == <span class="hljs-string">&quot;RTSP&quot;</span>]<br><br>    <span class="hljs-comment"># 组合最终输出</span><br>    output_lines = rtp_links + rtsp_links<br><br>    <span class="hljs-comment"># 写入到输出文件</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(<span class="hljs-string">&quot;\n&quot;</span>.join(output_lines))<br><br><span class="hljs-comment"># 指定输入和输出文件路径</span><br>input_file = <span class="hljs-string">&quot;input.txt&quot;</span>   <span class="hljs-comment"># 原始数据为 input.txt</span><br>output_file = <span class="hljs-string">&quot;output.txt&quot;</span> <span class="hljs-comment"># 处理后的数据存放在 output.txt</span><br><br><span class="hljs-comment"># 运行程序</span><br>extract_and_classify_channels(input_file, output_file)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;转换完成！结果已保存至 <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><hr><p>仅适用于广西联通沃家电视抓包数据，仅有单播源。</p><h4 id="3-提取抓包数据中的直播源"><a href="#3-提取抓包数据中的直播源" class="headerlink" title="3-提取抓包数据中的直播源"></a>3-提取抓包数据中的直播源</h4><p>仅做整理，不改变原始数据的频道顺序。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_rtsp_channels</span>(<span class="hljs-params">input_file, output_file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(input_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><br>    <span class="hljs-comment"># 匹配所有 rtsp 协议的频道</span><br>    pattern = re.findall(<span class="hljs-string">r&#x27;ChannelName=&quot;(.*?)&quot;.*?ChannelSDP=&quot;(rtsp://.*?)&quot;&#x27;</span>, content)<br><br>    rtsp_links = []<br><br>    <span class="hljs-keyword">for</span> channel_name, channel_sdp <span class="hljs-keyword">in</span> pattern:<br>        <span class="hljs-comment"># 处理 rtsp:// 链接，去掉 .smil 之后的 ? 及其后面部分</span><br>        urls = [re.sub(<span class="hljs-string">r&#x27;(\.smil)\?.*&#x27;</span>, <span class="hljs-string">r&#x27;\1&#x27;</span>, url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> channel_sdp.split(<span class="hljs-string">&quot;|&quot;</span>)]<br>        rtsp_links.extend(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;channel_name&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls)<br><br>    <span class="hljs-comment"># 写入到输出文件</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(<span class="hljs-string">&quot;\n&quot;</span>.join(rtsp_links))<br><br><span class="hljs-comment"># 指定输入和输出文件路径</span><br>input_file = <span class="hljs-string">&quot;input.txt&quot;</span>   <span class="hljs-comment"># 原始数据为 input.txt</span><br>output_file = <span class="hljs-string">&quot;output.txt&quot;</span> <span class="hljs-comment"># 处理后的数据存放在 output.txt</span><br><br><span class="hljs-comment"># 运行程序</span><br>extract_rtsp_channels(input_file, output_file)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;转换完成！结果已保存至 <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="4-提取抓包数据中的直播源（将单播源按照ID排序）"><a href="#4-提取抓包数据中的直播源（将单播源按照ID排序）" class="headerlink" title="4-提取抓包数据中的直播源（将单播源按照ID排序）"></a>4-提取抓包数据中的直播源（将单播源按照ID排序）</h4><p>按照ID排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_rtsp_channels</span>(<span class="hljs-params">input_file, output_file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(input_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><br>    <span class="hljs-comment"># 匹配所有 rtsp 协议的频道</span><br>    pattern = re.findall(<span class="hljs-string">r&#x27;ChannelID=.*?ChannelName=&quot;(.*?)&quot;.*?ChannelSDP=&quot;(rtsp://.*?)&quot;&#x27;</span>, content)<br><br>    channels = []<br>    <br>    <span class="hljs-keyword">for</span> channel_name, channel_sdp <span class="hljs-keyword">in</span> pattern:<br>        <span class="hljs-comment"># 处理 rtsp:// 链接，去掉 .smil 之后的 ? 及其后面部分</span><br>        sdp_urls = [re.sub(<span class="hljs-string">r&#x27;(\.smil)\?.*&#x27;</span>, <span class="hljs-string">r&#x27;\1&#x27;</span>, url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> channel_sdp.split(<span class="hljs-string">&quot;|&quot;</span>)]<br><br>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> sdp_urls:<br>            <span class="hljs-comment"># 提取 rtsp ID（224/ 后的最后 4 位数字）</span><br>            <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r&#x27;224/(\d+)&#x27;</span>, url)<br>            rtsp_id = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)[-<span class="hljs-number">4</span>:] <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;0000&quot;</span><br>            rtsp_channel_name = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;rtsp_id&#125;</span>-<span class="hljs-subst">&#123;channel_name&#125;</span>&quot;</span><br>            channels.append((<span class="hljs-built_in">int</span>(rtsp_id), rtsp_channel_name, url))<br><br>    <span class="hljs-comment"># 按 rtsp ID 排序</span><br>    channels.sort()<br><br>    <span class="hljs-comment"># 生成输出内容</span><br>    output_lines = [<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ch&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> _, ch, url <span class="hljs-keyword">in</span> channels]<br><br>    <span class="hljs-comment"># 写入到输出文件</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(<span class="hljs-string">&quot;\n&quot;</span>.join(output_lines))<br><br><span class="hljs-comment"># 指定输入和输出文件路径</span><br>input_file = <span class="hljs-string">&quot;input.txt&quot;</span>   <span class="hljs-comment"># 原始数据为 input.txt</span><br>output_file = <span class="hljs-string">&quot;output.txt&quot;</span> <span class="hljs-comment"># 处理后的数据存放在 output.txt</span><br><br><span class="hljs-comment"># 运行程序</span><br>extract_rtsp_channels(input_file, output_file)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;转换完成！结果已保存至 <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><hr><p>仅适用于广西电信光纤电视抓包数据，有组播、单播两种格式的直播源。</p><h4 id="5-提取抓包数据中的直播源（按照协议排序）"><a href="#5-提取抓包数据中的直播源（按照协议排序）" class="headerlink" title="5-提取抓包数据中的直播源（按照协议排序）"></a>5-提取抓包数据中的直播源（按照协议排序）</h4><p>仅做整理，不改变原始数据的频道顺序。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_and_classify_channels</span>(<span class="hljs-params">input_file, output_file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(input_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><br>    <span class="hljs-comment"># 匹配所有频道数据</span><br>    pattern = re.findall(<span class="hljs-string">r&quot;ChannelID=.*?ChannelName=\&quot;(.*?)\&quot;.*?ChannelURL=\&quot;igmp://(.*?)\&quot;.*?ChannelSDP=\&quot;(.*?)\&quot;&quot;</span>, content)<br><br>    rtp_links = []<br>    rtsp_links = []<br><br>    <span class="hljs-keyword">for</span> channel_name, channel_url, channel_sdp <span class="hljs-keyword">in</span> pattern:<br>        <span class="hljs-comment"># 处理 rtp:// 链接</span><br>        rtp_links.append(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;channel_name&#125;</span>,rtp://<span class="hljs-subst">&#123;channel_url&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># 处理 rtsp:// 链接，去掉 .smil 之后的 ? 及其后面部分</span><br>        sdp_urls = [re.sub(<span class="hljs-string">r&#x27;(\.smil)\?.*&#x27;</span>, <span class="hljs-string">r&#x27;\1&#x27;</span>, url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> channel_sdp.split(<span class="hljs-string">&quot;|&quot;</span>) <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">&quot;rtsp://&quot;</span>)]<br>        <br>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> sdp_urls:<br>            rtsp_links.append(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;channel_name&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># 组合最终输出，先写 rtp 部分，再写 rtsp 部分</span><br>    output_lines = [<span class="hljs-string">&quot;# 组播源&quot;</span>] + rtp_links + [<span class="hljs-string">&quot;\n# 单播源&quot;</span>] + rtsp_links<br><br>    <span class="hljs-comment"># 写入到输出文件</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(<span class="hljs-string">&quot;\n&quot;</span>.join(output_lines))<br><br><span class="hljs-comment"># 指定输入和输出文件路径</span><br>input_file = <span class="hljs-string">&quot;input.txt&quot;</span>   <span class="hljs-comment"># 原始数据为 input.txt</span><br>output_file = <span class="hljs-string">&quot;output.txt&quot;</span> <span class="hljs-comment"># 处理后的数据存放在 output.txt</span><br><br><span class="hljs-comment"># 运行程序</span><br>extract_and_classify_channels(input_file, output_file)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;转换完成！结果已保存至 <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="6-提取抓包数据中的直播源（将组播、单播源按照ID排序）"><a href="#6-提取抓包数据中的直播源（将组播、单播源按照ID排序）" class="headerlink" title="6-提取抓包数据中的直播源（将组播、单播源按照ID排序）"></a>6-提取抓包数据中的直播源（将组播、单播源按照ID排序）</h4><p>按照ID排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_and_classify_channels</span>(<span class="hljs-params">input_file, output_file</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(input_file, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><br>    <span class="hljs-comment"># 匹配所有频道数据</span><br>    pattern = re.findall(<span class="hljs-string">r&quot;ChannelID=.*?ChannelName=\&quot;(.*?)\&quot;.*?ChannelURL=\&quot;igmp://(\d+\.\d+\.\d+\.\d+):(\d+)\&quot;.*?ChannelSDP=\&quot;(.*?)\&quot;&quot;</span>, content)<br><br>    channels = []<br><br>    <span class="hljs-keyword">for</span> channel_name, ip, port, channel_sdp <span class="hljs-keyword">in</span> pattern:<br>        <span class="hljs-comment"># 提取 rtp ID（IP 最后一段）</span><br>        rtp_id = ip.split(<span class="hljs-string">&quot;.&quot;</span>)[-<span class="hljs-number">1</span>]  <span class="hljs-comment"># 例如 239.81.0.0 -&gt; 0</span><br>        rtp_channel_name = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;rtp_id&#125;</span>-<span class="hljs-subst">&#123;channel_name&#125;</span>&quot;</span><br>        rtp_url = <span class="hljs-string">f&quot;rtp://<span class="hljs-subst">&#123;ip&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span>&quot;</span><br>        channels.append((<span class="hljs-built_in">int</span>(rtp_id), rtp_channel_name, rtp_url, <span class="hljs-string">&quot;RTP&quot;</span>))<br><br>        <span class="hljs-comment"># 处理 rtsp:// 链接，去掉 .smil 之后的 ? 及其后面部分</span><br>        sdp_urls = [re.sub(<span class="hljs-string">r&#x27;(\.smil)\?.*&#x27;</span>, <span class="hljs-string">r&#x27;\1&#x27;</span>, url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> channel_sdp.split(<span class="hljs-string">&quot;|&quot;</span>) <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">&quot;rtsp://&quot;</span>)]<br>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> sdp_urls:<br>            <span class="hljs-comment"># 提取 rtsp ID（224/ 后的最后 4 位数字）</span><br>            <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r&#x27;224/(\d+)&#x27;</span>, url)<br>            rtsp_id = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)[-<span class="hljs-number">4</span>:] <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;0000&quot;</span><br>            rtsp_channel_name = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;rtsp_id&#125;</span>-<span class="hljs-subst">&#123;channel_name&#125;</span>&quot;</span><br>            channels.append((<span class="hljs-built_in">int</span>(rtsp_id), rtsp_channel_name, url, <span class="hljs-string">&quot;RTSP&quot;</span>))<br><br>    <span class="hljs-comment"># 按 ID 排序</span><br>    channels.sort()<br><br>    <span class="hljs-comment"># 分离 rtp 和 rtsp</span><br>    rtp_links = [<span class="hljs-string">&quot;# 组播源&quot;</span>] + [<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ch&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> _, ch, url, t <span class="hljs-keyword">in</span> channels <span class="hljs-keyword">if</span> t == <span class="hljs-string">&quot;RTP&quot;</span>]<br>    rtsp_links = [<span class="hljs-string">&quot;\n# 单播源&quot;</span>] + [<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ch&#125;</span>,<span class="hljs-subst">&#123;url&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> _, ch, url, t <span class="hljs-keyword">in</span> channels <span class="hljs-keyword">if</span> t == <span class="hljs-string">&quot;RTSP&quot;</span>]<br><br>    <span class="hljs-comment"># 组合最终输出</span><br>    output_lines = rtp_links + rtsp_links<br><br>    <span class="hljs-comment"># 写入到输出文件</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>        file.write(<span class="hljs-string">&quot;\n&quot;</span>.join(output_lines))<br><br><span class="hljs-comment"># 指定输入和输出文件路径</span><br>input_file = <span class="hljs-string">&quot;input.txt&quot;</span>   <span class="hljs-comment"># 原始数据为 input.txt</span><br>output_file = <span class="hljs-string">&quot;output.txt&quot;</span> <span class="hljs-comment"># 处理后的数据存放在 output.txt</span><br><br><span class="hljs-comment"># 运行程序</span><br>extract_and_classify_channels(input_file, output_file)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;转换完成！结果已保存至 <span class="hljs-subst">&#123;output_file&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure></div></article></div></div></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content">Copyright © 2017-2025 Cahcn<br>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> & <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><br>尊重著作权，转载请标明出处。</div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>